NAME=M68k anal jump
FILE=bins/smd/LiquidSpaceDodgerV3.bin
CMDS=ao @ 0x00000230~jump[1]
EXPECT=<<EOF
0x000009f2
EOF
RUN

NAME=68020 DIVL operands
FILE=malloc://32
CMDS=<<EOF
e asm.arch=m68k
e asm.cpu=68020
wx 4c6f08010042 @ 0
ao ~size
pd1
EOF
EXPECT=<<EOF
size: 6
            0x00000000      4c6f08010042   divs.l 0x42(a7), d1, d0
EOF
RUN

NAME=M68K trap in function
FILE=malloc://32
CMDS=<<EOF
e asm.arch=m68k
e asm.cpu=68020
wx 4e56fff8 @ 0
wx 4e71 @ 4
wx 4e4d @ 6
wx 4e71 @ 8
wx 4e5e4e75 @ 10
aa
afl 0
pD14@0
EOF
# actually trap is part of the function
EXPECT=<<EOF
0x00000000    1 8            fcn.00000000
/ 8: fcn.00000000 ();
|           0x00000000      4e56fff8       link.w a6, 0xfff8
|           0x00000004      4e71           nop
\           0x00000006      4e4d           trap 0xd
            0x00000008      4e71           nop
            0x0000000a      4e5e           unlk a6
            0x0000000c      4e75           rts
EOF
RUN
